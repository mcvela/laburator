(function(e,t){function n(){}function r(){}function i(){}function x(e,t){if(typeof t==="string")t=t.split(".");var n=t.join(".").replace(/\.(\w)/g,function(e,t){return t.toUpperCase()}),r=t.shift(),i;if(typeof (i=e[n])!=a)i=i;else if(typeof (i=e[r])!=a&&t.length>0)i=x(i,t);return i}function T(){function i(e,r){n.bind(e,function(){return r.apply(t,arguments)})}var e=o.apply(arguments),t=this,n=e.length===1?t:e.shift(),r;e=e[0]||{};for(r in e)i(r,e[r])}function N(e,t){return{input:e,form:t}}var s=(JSON||{}).stringify,o=Array.prototype.slice,u,a="undefined",f="item.manager",l="plugins",c="ext",h="html.wrap",p="html.hidden",d="keys",v="preInvalidate",m="postInvalidate",g="getFormData",y="setFormData",b="setInputData",w="postInit",E="ready",S={itemManager:r,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!s)throw new Error("JSON.stringify() not found");u=r.prototype;u.init=function(e){};u.filter=function(e,t){var n=[],r,i;for(r=0;r<e.length;r++){i=e[r];if(this.itemContains(i,t))n.push(i)}return n};u.itemContains=function(e,t){return this.itemToString(e).toLowerCase().indexOf(t.toLowerCase())==0};u.stringToItem=function(e){return e};u.itemToString=function(e){return e};u.compareItems=function(e,t){return e==t};u=n.prototype;u.init=function(t,n){var r=this,i,s,o;r._defaults=e.extend({},S);r._opts=n||{};r._plugins={};r._itemManager=s=new(r.opts(f));t=e(t);o=e(r.opts(h));i=e(r.opts(p));t.wrap(o).keydown(function(e){return r.onKeyDown(e)}).keyup(function(e){return r.onKeyUp(e)}).data("textext",r);e(r).data({hiddenInput:i,wrapElement:t.parents(".text-wrap").first(),input:t});i.attr("name",t.attr("name"));t.attr("name",null);i.insertAfter(t);e.extend(true,s,r.opts(c+".item.manager"));e.extend(true,r,r.opts(c+".*"),r.opts(c+".core"));r.originalWidth=t.outerWidth();r.invalidateBounds();s.init(r);r.initPatches();r.initPlugins(r.opts(l),e.fn.textext.plugins);r.on({setFormData:r.onSetFormData,getFormData:r.onGetFormData,setInputData:r.onSetInputData,anyKeyUp:r.onAnyKeyUp});r.trigger(w);r.trigger(E);r.getFormData(0)};u.initPatches=function(){var t=[],n=e.fn.textext.patches,r;for(r in n)t.push(r);this.initPlugins(t,n)};u.initPlugins=function(t,n){var r=this,i,s,o,u=[],a;if(typeof t=="string")t=t.split(/\s*,\s*|\s+/g);for(a=0;a<t.length;a++){s=t[a];o=n[s];if(o){r._plugins[s]=o=new o;r[s]=function(e){return function(){return e}}(o);u.push(o);e.extend(true,o,r.opts(c+".*"),r.opts(c+"."+s))}}u.sort(function(e,t){e=e.initPriority();t=t.initPriority();return e===t?0:e<t?1:-1});for(a=0;a<u.length;a++)u[a].init(r)};u.hasPlugin=function(e){return!!this._plugins[e]};u.on=T;u.bind=function(e,t){this.input().bind(e,t)};u.trigger=function(){var e=arguments;this.input().trigger(e[0],o.call(e,1))};u.itemManager=function(){return this._itemManager};u.input=function(){return e(this).data("input")};u.opts=function(e){var t=x(this._opts,e);return typeof t=="undefined"?x(this._defaults,e):t};u.wrapElement=function(){return e(this).data("wrapElement")};u.invalidateBounds=function(){var e=this,t=e.input(),n=e.wrapElement(),r=n.parent(),i=e.originalWidth+"px",s;e.trigger(v);s=t.outerHeight()+"px";t.css({width:i});n.css({width:i,height:s});r.css({height:s});e.trigger(m)};u.focusInput=function(){this.input()[0].focus()};u.serializeData=s;u.hiddenInput=function(t){return e(this).data("hiddenInput")};u.getWeightedEventResponse=function(e,t){var n=this,r={},i=0;n.trigger(e,r,t);for(var s in r)i=Math.max(i,s);return r[i]};u.getFormData=function(e){var t=this,n=t.getWeightedEventResponse(g,e||0);t.trigger(y,n["form"]);t.trigger(b,n["input"])};u.onAnyKeyUp=function(e,t){this.getFormData(t)};u.onSetInputData=function(e,t){this.input().val(t)};u.onSetFormData=function(e,t){var n=this;n.hiddenInput().val(n.serializeData(t))};u.onGetFormData=function(e,t){var n=this.input().val();t[0]=N(n,n)};e(["Down","Up"]).each(function(){var e=this.toString();u["onKey"+e]=function(t){var n=this,r=n.opts(d)[t.keyCode],i=true;if(r){i=r.substr(-1)!="!";r=r.replace("!","");n.trigger(r+"Key"+e);if(e=="Up"&&n._lastKeyDown==t.keyCode){n._lastKeyDown=null;n.trigger(r+"KeyPress")}if(e=="Down")n._lastKeyDown=t.keyCode}n.trigger("anyKey"+e,t.keyCode);return i}});u=i.prototype;u.on=T;u.formDataObject=N;u.init=function(e){throw new Error("Not implemented")};u.baseInit=function(t,n){var r=this;t._defaults=e.extend(true,t._defaults,n);r._core=t;r._timers={}};u.startTimer=function(e,t,n){var r=this;r.stopTimer(e);r._timers[e]=setTimeout(function(){delete r._timers[e];n.apply(r)},t*1e3)};u.stopTimer=function(e){clearTimeout(this._timers[e])};u.core=function(){return this._core};u.opts=function(e){return this.core().opts(e)};u.itemManager=function(){return this.core().itemManager()};u.input=function(){return this.core().input()};u.val=function(e){var t=this.input();if(typeof e===a)return t.val();else t.val(e)};u.trigger=function(){var e=this.core();e.trigger.apply(e,arguments)};u.bind=function(e,t){this.core().bind(e,t)};u.initPriority=function(){return 0};var C=false;var k=e.fn.textext=function(t){var r;if(!C&&(r=e.fn.textext.css)!=null){e("head").append("<style>"+r+"</style>");C=true}return this.map(function(){var r=e(this);if(t==null)return r.data("textext");var i=new n;i.init(r,t);r.data("textext",i);return i.input()[0]})};k.addPlugin=function(e,t){k.plugins[e]=t;t.prototype=new k.TextExtPlugin};k.addPatch=function(e,t){k.patches[e]=t;t.prototype=new k.TextExtPlugin};k.TextExt=n;k.TextExtPlugin=i;k.ItemManager=r;k.plugins={};k.patches={}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtIE9Patches=t;e.fn.textext.addPatch("ie9",t);var n=t.prototype;n.init=function(e){if(navigator.userAgent.indexOf("MSIE 9")==-1)return;var t=this;e.on({postInvalidate:t.onPostInvalidate})};n.onPostInvalidate=function(){var e=this,t=e.input(),n=t.val();t.val(Math.random());t.val(n)}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtAjax=t;e.fn.textext.addPlugin("ajax",t);var n=t.prototype,r="ajax.data.callback",i="ajax.cache.results",s="ajax.loading.delay",o="ajax.loading.message",u="ajax.type.delay",a="setSuggestions",f="showDropdown",l="loading",c={ajax:{typeDelay:.5,loadingMessage:"Loading...",loadingDelay:.5,cacheResults:false,dataCallback:null}};n.init=function(e){var t=this;t.baseInit(e,c);t.on({getSuggestions:t.onGetSuggestions});t._suggestions=null};n.load=function(t){var n=this,i=n.opts(r)||function(e){return{q:e}},s;s=e.extend(true,{data:i(t),success:function(e){n.onComplete(e,t)},error:function(e,n){console.error(n,t)}},n.opts("ajax"));e.ajax(s)};n.onComplete=function(e,t){var n=this,r=e;n.dontShowLoading();if(n.opts(i)==true){n._suggestions=e;r=n.itemManager().filter(e,t)}n.trigger(a,{result:r})};n.dontShowLoading=function(){this.stopTimer(l)};n.showLoading=function(){var e=this;e.dontShowLoading();e.startTimer(l,e.opts(s),function(){e.trigger(f,function(t){t.clearItems();var n=t.addDropdownItem(e.opts(o));n.addClass("text-loading")})})};n.onGetSuggestions=function(e,t){var n=this,r=n._suggestions,s=(t||{}).query||"";if(r&&n.opts(i)===true)return n.onComplete(r,s);n.startTimer("ajax",n.opts(u),function(){n.showLoading();n.load(s)})}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtArrow=t;e.fn.textext.addPlugin("arrow",t);var n=t.prototype,r="html.arrow",i={html:{arrow:'<div class="text-arrow"/>'}};n.init=function(t){var n=this,s;n.baseInit(t,i);n._arrow=s=e(n.opts(r));n.core().wrapElement().append(s);s.bind("click",function(e){n.onArrowClick(e)})};n.onArrowClick=function(e){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtAutocomplete=t;e.fn.textext.addPlugin("autocomplete",t);var n=t.prototype,r=".",i="text-selected",s=r+i,o="text-suggestion",u=r+o,a="text-label",f=r+a,l="autocomplete.enabled",c="autocomplete.dropdown.position",h="autocomplete.dropdown.maxHeight",p="autocomplete.render",d="html.dropdown",v="html.suggestion",m="hideDropdown",g="showDropdown",y="getSuggestions",b="getFormData",w="toggleDropdown",E="above",S="below",x="mousedownOnAutocomplete",T={autocomplete:{enabled:true,dropdown:{position:S,maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};n.init=function(t){var n=this;n.baseInit(t,T);var r=n.input(),i;if(n.opts(l)===true){n.on({blur:n.onBlur,anyKeyUp:n.onAnyKeyUp,deleteKeyUp:n.onAnyKeyUp,backspaceKeyPress:n.onBackspaceKeyPress,enterKeyPress:n.onEnterKeyPress,escapeKeyPress:n.onEscapeKeyPress,setSuggestions:n.onSetSuggestions,showDropdown:n.onShowDropdown,hideDropdown:n.onHideDropdown,toggleDropdown:n.onToggleDropdown,postInvalidate:n.positionDropdown,getFormData:n.onGetFormData,downKeyDown:n.onDownKeyDown,upKeyDown:n.onUpKeyDown});i=e(n.opts(d));i.insertAfter(r);n.on(i,{mouseover:n.onMouseOver,mousedown:n.onMouseDown,click:n.onClick});i.css("maxHeight",n.opts(h)).addClass("text-position-"+n.opts(c));e(n).data("container",i);e(document.body).click(function(e){if(n.isDropdownVisible()&&!n.withinWrapElement(e.target))n.trigger(m)});n.positionDropdown()}};n.containerElement=function(){return e(this).data("container")};n.onMouseOver=function(t){var n=this,r=e(t.target);if(r.is(u)){n.clearSelected();r.addClass(i)}};n.onMouseDown=function(e){this.containerElement().data(x,true)};n.onClick=function(t){var n=this,r=e(t.target);if(r.is(u)||r.is(f))n.trigger("enterKeyPress");if(n.core().hasPlugin("tags"))n.val("")};n.onBlur=function(e){var t=this,n=t.containerElement(),r=n.data(x)===true;if(t.isDropdownVisible())r?t.core().focusInput():t.trigger(m);n.removeData(x)};n.onBackspaceKeyPress=function(e){var t=this,n=t.val().length>0;if(n||t.isDropdownVisible())t.getSuggestions()};n.onAnyKeyUp=function(e,t){var n=this,r=n.opts("keys."+t)!=null;if(n.val().length>0&&!r)n.getSuggestions()};n.onDownKeyDown=function(e){var t=this;t.isDropdownVisible()?t.toggleNextSuggestion():t.getSuggestions()};n.onUpKeyDown=function(e){this.togglePreviousSuggestion()};n.onEnterKeyPress=function(e){var t=this;if(t.isDropdownVisible())t.selectFromDropdown()};n.onEscapeKeyPress=function(e){var t=this;if(t.isDropdownVisible())t.trigger(m)};n.positionDropdown=function(){var e=this,t=e.containerElement(),n=e.opts(c),r=e.core().wrapElement().outerHeight(),i={};i[n===E?"bottom":"top"]=r+"px";t.css(i)};n.suggestionElements=function(){return this.containerElement().find(u)};n.setSelectedSuggestion=function(t){if(!t)return;var n=this,r=n.suggestionElements(),s=r.first(),u,a;n.clearSelected();for(a=0;a<r.length;a++){u=e(r[a]);if(n.itemManager().compareItems(u.data(o),t)){s=u.addClass(i);break}}s.addClass(i);n.scrollSuggestionIntoView(s)};n.selectedSuggestionElement=function(){return this.suggestionElements().filter(s).first()};n.isDropdownVisible=function(){return this.containerElement().is(":visible")===true};n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o=i;t[100]=r.formDataObject(s,o)};n.initPriority=function(){return 200};n.onHideDropdown=function(e){this.hideDropdown()};n.onToggleDropdown=function(e){var t=this;t.trigger(t.containerElement().is(":visible")?m:g)};n.onShowDropdown=function(t,n){var r=this,i=r.selectedSuggestionElement().data(o),s=r._suggestions;if(!s)return r.trigger(y);if(e.isFunction(n)){n(r)}else{r.renderSuggestions(r._suggestions);r.toggleNextSuggestion()}r.showDropdown(r.containerElement());r.setSelectedSuggestion(i)};n.onSetSuggestions=function(e,t){var n=this,r=n._suggestions=t.result;if(t.showHideDropdown!==false)n.trigger(r===null||r.length===0?m:g)};n.getSuggestions=function(){var e=this,t=e.val();if(e._previousInputValue==t)return;if(t=="")current=null;e._previousInputValue=t;e.trigger(y,{query:t})};n.clearItems=function(){this.containerElement().find(".text-list").children().remove()};n.renderSuggestions=function(t){var n=this;n.clearItems();e.each(t||[],function(e,t){n.addSuggestion(t)})};n.showDropdown=function(){this.containerElement().show()};n.hideDropdown=function(){var e=this,t=e.containerElement();e._previousInputValue=null;t.hide()};n.addSuggestion=function(e){var t=this,n=t.opts(p),r=t.addDropdownItem(n?n.call(t,e):t.itemManager().itemToString(e));r.data(o,e)};n.addDropdownItem=function(t){var n=this,r=n.containerElement().find(".text-list"),i=e(n.opts(v));i.find(".text-label").html(t);r.append(i);return i};n.clearSelected=function(){this.suggestionElements().removeClass(i)};n.toggleNextSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n;if(t.length>0){n=t.next();if(n.length>0)t.removeClass(i)}else{n=e.suggestionElements().first()}n.addClass(i);e.scrollSuggestionIntoView(n)};n.togglePreviousSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n=t.prev();if(n.length==0)return;e.clearSelected();n.addClass(i);e.scrollSuggestionIntoView(n)};n.scrollSuggestionIntoView=function(e){var t=e.outerHeight(),n=this.containerElement(),r=n.innerHeight(),i=n.scrollTop(),s=(e.position()||{}).top,o=null,u=parseInt(n.css("paddingTop"));if(s==null)return;if(s+t>r)o=s+i+t-r+u;if(s<0)o=s+i-u;if(o!=null)n.scrollTop(o)};n.selectFromDropdown=function(){var e=this,t=e.selectedSuggestionElement().data(o);if(t){e.val(e.itemManager().itemToString(t));e.core().getFormData()}e.trigger(m)};n.withinWrapElement=function(e){return this.core().wrapElement().find(e).size()>0}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtClear=t;e.fn.textext.addPlugin("clear",t);var n=t.prototype,r="html.clear",i={html:{clear:'<div class="text-clear"/>'}};n.init=function(t){var n=this,s;n.baseInit(t,i);n._clear=s=e(n.opts(r));n.core().wrapElement().append(s);s.bind("click",function(e){n.onClearClick(e)})};n.onClearClick=function(t){var n=this;if(typeof n.core()._plugins.tags!="undefined"){var r=n.core()._plugins.tags.tagElements();for(var i=0;i<r.length;i++){n.core()._plugins.tags.removeTag(e(r[i]))}}n.val("");n.core().getFormData()}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtFilter=t;e.fn.textext.addPlugin("filter",t);var n=t.prototype,r="filter.enabled",i="filter.items",s={filter:{enabled:true,items:null}};n.init=function(e){var t=this;t.baseInit(e,s);t.on({getFormData:t.onGetFormData,isTagAllowed:t.onIsTagAllowed,setSuggestions:t.onSetSuggestions});t._suggestions=null};n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o="";if(!r.core().hasPlugin("tags")){if(r.isValueAllowed(s))o=i;t[300]=r.formDataObject(s,o)}};n.isValueAllowed=function(e){var t=this,n=t.opts("filterItems")||t._suggestions||[],i=t.itemManager(),s=!t.opts(r),o;for(o=0;o<n.length&&!s;o++)if(i.compareItems(e,n[o]))s=true;return s};n.onIsTagAllowed=function(e,t){t.result=this.isValueAllowed(t.tag)};n.onSetSuggestions=function(e,t){this._suggestions=t.result}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtFocus=t;e.fn.textext.addPlugin("focus",t);var n=t.prototype,r="html.focus",i={html:{focus:'<div class="text-focus"/>'}};n.init=function(e){var t=this;t.baseInit(e,i);t.core().wrapElement().append(t.opts(r));t.on({blur:t.onBlur,focus:t.onFocus});t._timeoutId=0};n.onBlur=function(e){var t=this;clearTimeout(t._timeoutId);t._timeoutId=setTimeout(function(){t.getFocus().hide()},100)};n.onFocus=function(e){var t=this;clearTimeout(t._timeoutId);t.getFocus().show()};n.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtPrompt=t;e.fn.textext.addPlugin("prompt",t);var n=t.prototype,r="text-hide-prompt",i="prompt",s="html.prompt",o={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};n.init=function(t){var n=this,r="placeholder",u,a;n.baseInit(t,o);u=e(n.opts(s));e(n).data("container",u);n.core().wrapElement().append(u);n.setPrompt(n.opts(i));a=t.input().attr(r);if(!a)a=n.opts(i);t.input().attr(r,"");if(a)n.setPrompt(a);if(e.trim(n.val()).length>0)n.hidePrompt();n.on({blur:n.onBlur,focus:n.onFocus,postInvalidate:n.onPostInvalidate,postInit:n.onPostInit})};n.onPostInit=function(e){this.invalidateBounds()};n.onPostInvalidate=function(e){this.invalidateBounds()};n.invalidateBounds=function(){var e=this,t=e.input();e.containerElement().css({paddingLeft:t.css("paddingLeft"),paddingTop:t.css("paddingTop")})};n.onBlur=function(e){var t=this;t.startTimer("prompt",.1,function(){t.showPrompt()})};n.showPrompt=function(){var t=this,n=t.input();if(e.trim(t.val()).length===0&&!n.is(":focus"))t.containerElement().removeClass(r)};n.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass(r)};n.onFocus=function(e){this.hidePrompt()};n.setPrompt=function(e){this.containerElement().text(e)};n.containerElement=function(){return e(this).data("container")}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtSuggestions=t;e.fn.textext.addPlugin("suggestions",t);var n=t.prototype,r="suggestions",i={suggestions:null};n.init=function(e){var t=this;t.baseInit(e,i);t.on({getSuggestions:t.onGetSuggestions,postInit:t.onPostInit})};n.setSuggestions=function(e,t){this.trigger("setSuggestions",{result:e,showHideDropdown:t!=false})};n.onPostInit=function(e){var t=this;t.setSuggestions(t.opts(r),false)};n.onGetSuggestions=function(e,t){var n=this,i=n.opts(r);i.sort();n.setSuggestions(n.itemManager().filter(i,t.query))}})(jQuery);(function(e){function t(){}e.fn.textext.TextExtTags=t;e.fn.textext.addPlugin("tags",t);var n=t.prototype,r=".",i="text-tags-on-top",s=r+i,o="text-tag",u=r+o,a="text-tags",f=r+a,l="text-label",c=r+l,h="text-remove",p=r+h,d="tags.enabled",v="tags.items",m="html.tag",g="html.tags",y="isTagAllowed",b="tagClick",w={tags:{enabled:true,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};n.init=function(t){this.baseInit(t,w);var n=this,r=n.input(),i;if(n.opts(d)){i=e(n.opts(g));r.after(i);e(n).data("container",i);n.on({enterKeyPress:n.onEnterKeyPress,backspaceKeyDown:n.onBackspaceKeyDown,preInvalidate:n.onPreInvalidate,postInit:n.onPostInit,getFormData:n.onGetFormData});n.on(i,{click:n.onClick,mousemove:n.onContainerMouseMove});n.on(r,{mousemove:n.onInputMouseMove})}n._originalPadding={left:parseInt(r.css("paddingLeft")||0),top:parseInt(r.css("paddingTop")||0)};n._paddingBox={left:0,top:0};n.updateFormCache()};n.containerElement=function(){return e(this).data("container")};n.onPostInit=function(e){var t=this;t.addTags(t.opts(v))};n.onGetFormData=function(e,t,n){var r=this,i=n===13?"":r.val(),s=r._formData;t[200]=r.formDataObject(i,s)};n.initPriority=function(){return 100};n.onInputMouseMove=function(e){this.toggleZIndex(e)};n.onContainerMouseMove=function(e){this.toggleZIndex(e)};n.onBackspaceKeyDown=function(e){var t=this,n=t.tagElements().last();if(t.val().length==0)t.removeTag(n)};n.onPreInvalidate=function(e){var t=this,n=t.tagElements().last(),r=n.position();if(n.length>0)r.left+=n.innerWidth();else r=t._originalPadding;t._paddingBox=r;t.input().css({paddingLeft:r.left,paddingTop:r.top})};n.onClick=function(t){function l(e,t){a.data(o,e);a.find(c).text(n.itemManager().itemToString(e));n.updateFormCache();r.getFormData();r.invalidateBounds();if(t)r.focusInput()}var n=this,r=n.core(),i=e(t.target),s=0,a;if(i.is(f)){s=1}else if(i.is(p)){n.removeTag(i.parents(u+":first"));s=1}else if(i.is(c)){a=i.parents(u+":first");n.trigger(b,a,a.data(o),l)}if(s)r.focusInput()};n.onEnterKeyPress=function(e){var t=this,n=t.val(),r=t.itemManager().stringToItem(n);if(t.isTagAllowed(r)){t.addTags([r]);t.core().focusInput()}};n.updateFormCache=function(){var t=this,n=[];t.tagElements().each(function(){n.push(e(this).data(o))});t._formData=n};n.toggleZIndex=function(e){var t=this,n=t.input().offset(),r=e.clientX-n.left,o=e.clientY-n.top,u=t._paddingBox,a=t.containerElement(),f=a.is(s),l=r>u.left&&o>u.top;if(!f&&!l||f&&l)a[(!f?"add":"remove")+"Class"](i)};n.tagElements=function(){return this.containerElement().find(u)};n.isTagAllowed=function(e){var t={tag:e,result:true};this.trigger(y,t);return t.result===true};n.addTags=function(e){if(!e||e.length==0)return;var t=this,n=t.core(),r=t.containerElement(),i,s;for(i=0;i<e.length;i++){s=e[i];if(s&&t.isTagAllowed(s))r.append(t.renderTag(s))}t.updateFormCache();n.getFormData();n.invalidateBounds()};n.getTagElement=function(t){var n=this,r=n.tagElements(),i,s;for(i=0;i<r.length;i++){s=e(r[i]);if(n.itemManager().compareItems(s.data(o),t))return s}return null};n.removeTag=function(t){var n=this,r=n.core(),i;if(t instanceof e){i=t;t=t.data(o)}else{i=n.getTagElement(t);if(i===null){return}}i.remove();n.updateFormCache();r.getFormData();r.invalidateBounds()};n.renderTag=function(t){var n=this,r=e(n.opts(m));r.find(".text-label").text(n.itemManager().itemToString(t));r.data(o,t);return r}})(jQuery)